# Cultivos HidropÃ³nicos

> **CrÃ©dito (Coautor): Jose Eduardo R. B.**  
> **Autor principal:** Victor Daniel  

Sistema web y base de datos para la **gestiÃ³n de una granja hidropÃ³nica de interior**, orientado a la administraciÃ³n de **operarios**, **bandejas**, **especies**, **plantas** y **operaciones** (tareas), con generaciÃ³n de **informes PDF**.

---

## ğŸ“Œ DescripciÃ³n del proyecto
Este proyecto implementa una aplicaciÃ³n web (â€œCultivosâ€) conectada a una base de datos para facilitar la administraciÃ³n de un cultivo hidropÃ³nico.  
El sistema estÃ¡ pensado para una granja interior donde las plantas se cultivan en bandejas apiladas en torres, con iluminaciÃ³n artificial y parÃ¡metros controlados.

---

## ğŸ¯ Objetivos

### Objetivo general
Centralizar la informaciÃ³n del cultivo hidropÃ³nico en una base de datos y ofrecer una interfaz web que permita gestionar los datos de forma estructurada.

### Objetivos especÃ­ficos
- Gestionar **Operarios** (alta, ediciÃ³n, eliminaciÃ³n y listado).
- Gestionar **Especies** (alta, ediciÃ³n, eliminaciÃ³n y listado).
- Gestionar **Bandejas** (alta, ediciÃ³n, eliminaciÃ³n y listado).
- Gestionar informaciÃ³n asociada a bandejas:
  - **Plantas** por bandeja
  - **Operaciones** (tareas) por bandeja
- Generar **informes PDF** de bandejas con datos relevantes del cultivo.

---

## ğŸ› ï¸ TecnologÃ­as utilizadas
- **PHP** (lÃ³gica del servidor)
- **HTML5**
- **CSS3**
- **JavaScript**
- **MySQL / MariaDB**
- **Bootstrap** (en la portada/plantilla principal)
- **FPDF** (generaciÃ³n de informes en PDF)

---

## ğŸ§© Modelo de datos (resumen acadÃ©mico)

### Tablas principales
- **operarios**: trabajadores y datos personales.
- **operaciones**: diario de tareas realizadas/planificadas sobre la explotaciÃ³n.
- **bandejas**: estado y posiciÃ³n de cada bandeja, y su especie asociada.
- **plantas**: plantas por bandeja y su porte/tamaÃ±o actual.
- **especies**: parÃ¡metros Ã³ptimos de crecimiento (luz, humedad, nutrientes, pH, EC, etc.).

### Tablas de soporte
- **operarios_baja**: registro de operarios dados de baja (soporte a borrados/recuperaciÃ³n).
- **control_bandejas**: histÃ³rico de cambios realizados en bandejas (valores antiguos vs nuevos).
- **tabla_mensajes**: mensajes generados por triggers (avisos internos).

### Relaciones principales (visiÃ³n general)
- Un **operario** puede tener muchas **operaciones** (1 â†’ âˆ).
- Una **bandeja** puede tener muchas **operaciones** (1 â†’ âˆ).
- Una **bandeja** puede tener varias **plantas** (1 â†’ âˆ).
- Una **especie** puede estar en varias **bandejas** (1 â†’ âˆ), pero una bandeja solo alberga una especie.

---

## âš¡ Triggers y procedimientos (implementaciÃ³n BD)

### Triggers (ejemplos destacados)
- **BEFORE INSERT en plantas**: restringe el id numÃ©rico de planta para que una bandeja solo pueda tener plantas con id de 1 a 6.
- **AFTER INSERT en operaciones**: si una operaciÃ³n se inserta con `costo_materiales = NULL`, se registra un mensaje en `tabla_mensajes`.
- **BEFORE/AFTER UPDATE en bandejas**: almacena cambios en `control_bandejas`.
- **BEFORE/AFTER DELETE en operarios**: permite almacenar operarios eliminados en `operarios_baja` y recuperar informaciÃ³n.

### Procedimientos almacenados
- ActualizaciÃ³n del **porte_actual** en plantas.
- ActualizaciÃ³n del **estado de tarea** en operaciones (incluyendo control de fechas de inicio/final).
- ActualizaciÃ³n del **estado de bandeja** (incluyendo fechas asociadas a plantado/cosecha).

---

## âœ… Funcionalidades principales (aplicaciÃ³n web)
- Listados y formularios CRUD para:
  - **Operarios**
  - **Especies**
  - **Bandejas**
- EdiciÃ³n de **bandejas** con vista ampliada:
  - Datos principales de bandeja
  - Listado de plantas de la bandeja
  - Listado de operaciones asociadas
- **Informe PDF** por bandeja con datos completos (bandeja + plantas + operaciones).
- Validaciones destacadas en formularios:
  - DNI con formato controlado.
  - TelÃ©fono con formato espaciado.
  - Id de especie con formato especÃ­fico.
  - Reglas de ediciÃ³n guiadas en operaciones (estado Por_hacer / Haciendo / Hecha, autocompletado de tiempos, etc.).

---

## ğŸ“‚ Estructura del proyecto
```txt
cultivos-hidroponicos/
â”‚
â”œâ”€â”€ Documentacion/ # PresentaciÃ³n y dossier del proyecto (PDF)
â”œâ”€â”€ bandejas/ # MÃ³dulo bandejas (CRUD + informe)
â”œâ”€â”€ especies/ # MÃ³dulo especies (CRUD)
â”œâ”€â”€ operarios/ # MÃ³dulo operarios (CRUD)
â”œâ”€â”€ scripts SQL creaciÃ³n e inserciÃ³n/ # Scripts SQL (creaciÃ³n/inserciÃ³n)
â”œâ”€â”€ fpdf17/ # LibrerÃ­a para generaciÃ³n de PDFs
â”œâ”€â”€ css/ # Hojas de estilo
â”œâ”€â”€ js/ # Scripts JavaScript
â”œâ”€â”€ images/ # Recursos grÃ¡ficos
â”‚
â”œâ”€â”€ bd_funciones.inc
â”œâ”€â”€ cultivos.css
â”œâ”€â”€ cultivos_cabecera.inc
â”œâ”€â”€ index.php
â””â”€â”€ indexviejo.php
```

## âš™ï¸ InstalaciÃ³n y ejecuciÃ³n (local)

### 1ï¸âƒ£ Requisitos
- Apache (XAMPP/WAMP/LAMP recomendado)
- PHP
- MySQL / MariaDB

### 2ï¸âƒ£ Base de datos
En `scripts SQL creaciÃ³n e inserciÃ³n/` tienes:
- **SQL Cultivos- creaciÃ³n BD.sql**
- **SQL Cultivos- insercion datos.sql**

Pasos recomendados:
1. Crear base de datos en MySQL/MariaDB.
2. Ejecutar el script de creaciÃ³n.
3. (Opcional) Ejecutar el script de inserciÃ³n para datos iniciales.

### 3ï¸âƒ£ ConfiguraciÃ³n de conexiÃ³n
Revisa el archivo:
- `bd_funciones.inc`

(Ajusta host, usuario, contraseÃ±a y nombre de BD segÃºn tu entorno).

### 4ï¸âƒ£ Ejecutar
Coloca el proyecto en el directorio del servidor:
- XAMPP â†’ `htdocs/`

Y abre:
http://localhost/cultivos-hidroponicos/


---

## ğŸ“š DocumentaciÃ³n del proyecto
En `Documentacion/` se incluyen:
- PresentaciÃ³n del sistema
- Dossier tÃ©cnico (modelo de datos, triggers, procedimientos y explicaciÃ³n de la app)

---

## âš ï¸ LimitaciÃ³n conocida
Se documenta un problema relacionado con el input `datetime-local` en algunos navegadores, donde el valor **00** en segundos puede no capturarse correctamente, afectando la ediciÃ³n de fechas con segundos en operaciones.

---

## ğŸ‘¥ Autores
- **Victor Daniel** â€” Autor principal  
- **Jose Eduardo R. B.** â€” Coautor  

---

## ğŸ“œ Licencia / uso
Proyecto desarrollado con fines **educativos/acadÃ©micos**.
